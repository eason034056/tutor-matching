# 🔍 檔案大小警示除錯指南

## 🐛 **問題診斷**

如果檔案過大的警示沒有出現，請按照以下步驟進行診斷：

---

## 📋 **步驟1：檢查控制台訊息**

### 開啟瀏覽器開發者工具：
- **Chrome/Edge**: 按 `F12` 或右鍵選擇「檢查」
- **Safari**: 先到設定開啟開發選單，然後按 `Option + Cmd + I`

### 在 Console 標籤中查看：
當您選擇檔案時，應該會看到類似這樣的訊息：
```
檔案資訊: 名稱=IMG_1234.jpg, 大小=7.2MB, 類型=image/jpeg
```

### 如果沒有看到這個訊息：
- ❌ 檔案選擇功能本身有問題
- ❌ JavaScript 執行被阻擋

---

## 📋 **步驟2：測試檔案大小檢查**

### 手動測試不同大小的檔案：

#### ✅ **測試小檔案（應該成功）**
- 選擇一個 1-2MB 的照片
- 控制台應顯示檔案資訊
- 應該能看到圖片預覽

#### ⚠️ **測試大檔案（應該顯示警示）**
- 選擇一個 6-10MB 的照片
- 控制台應顯示檔案資訊
- 應該出現紅色錯誤警示：「⚠️ 檔案太大無法上傳！」
- 1秒後應該出現藍色提示：「💡 檔案壓縮小技巧...」

---

## 📋 **步驟3：檢查 Toast 通知系統**

### 確認 sonner toast 正常運作：
1. **檢查是否有其他錯誤警示**：嘗試留空必填欄位並提交表單
2. **查看是否有CSS衝突**：檢查頁面上是否有其他覆蓋toast的元素

### 手動測試 toast：
在控制台中輸入以下程式碼測試：
```javascript
// 測試一般警示
toast.error('測試錯誤訊息')

// 測試帶設定的警示
toast.error('測試長時間警示', { duration: 8000 })

// 測試資訊警示
toast.info('測試資訊訊息')
```

---

## 📋 **步驟4：檢查常見問題**

### 🔍 **問題A：檔案沒有被選中**
**症狀**：控制台沒有「檔案資訊」訊息
**解決方案**：
- 確認點擊「選擇檔案」按鈕
- 確認在檔案選擇對話框中實際選擇了檔案
- 確認檔案選擇對話框有正確關閉

### 🔍 **問題B：Toast 通知被禁用**
**症狀**：控制台有檔案資訊，但沒有看到警示彈窗
**解決方案**：
- 檢查瀏覽器是否禁用了通知
- 檢查是否有廣告攔截軟體阻擋通知
- 嘗試重新載入頁面

### 🔍 **問題C：CSS 樣式衝突**
**症狀**：警示可能出現但不可見
**解決方案**：
- 檢查頁面是否有其他元素覆蓋toast
- 嘗試暫時禁用其他CSS
- 檢查toast容器的z-index

### 🔍 **問題D：JavaScript 錯誤**
**症狀**：控制台有紅色錯誤訊息
**解決方案**：
- 檢查控制台的 Errors 標籤
- 查看是否有未處理的例外
- 嘗試重新載入頁面

---

## 🧪 **快速測試方案**

### 建立測試檔案：
1. **小檔案測試**：用手機拍一張普通照片（通常2-4MB）
2. **大檔案測試**：用專業相機拍一張高解析度照片，或使用以下方法：
   - 在 Photoshop/GIMP 中創建一個很大的圖片
   - 下載一張高解析度的圖片

### 測試步驟：
1. 開啟表單頁面
2. 打開開發者工具（F12）
3. 點擊 Console 標籤
4. 選擇大檔案
5. 觀察控制台訊息和警示彈窗

---

## 📞 **除錯結果報告**

### 如果警示正常顯示：
✅ **成功訊息**：
- 控制台顯示：`檔案資訊: 名稱=xxx.jpg, 大小=7.2MB, 類型=image/jpeg`
- 紅色警示：「⚠️ 檔案太大無法上傳！ 您的檔案：7.2MB，系統限制：最大5MB...」
- 藍色提示：「💡 檔案壓縮小技巧：大部分手機相機都有...」

### 如果警示仍未顯示：
❌ **請提供以下資訊**：
- 瀏覽器版本（Chrome/Safari/Firefox）
- 控制台中的所有訊息（包括錯誤）
- 選擇的檔案大小和類型
- 是否有看到「檔案資訊」訊息

---

## 🔧 **緊急修復方案**

如果警示系統仍有問題，可以暫時使用更簡單的警示：

```javascript
// 在控制台中執行以下程式碼來替換現有的檔案檢查
const originalHandleChange = document.querySelector('input[type="file"]').onchange;
document.querySelector('input[type="file"]').onchange = function(e) {
  const file = e.target.files[0];
  if (file && file.size > 5 * 1024 * 1024) {
    alert(`檔案太大！您的檔案：${(file.size/1024/1024).toFixed(1)}MB，請選擇小於5MB的照片`);
    e.target.value = '';
    return;
  }
  if (originalHandleChange) originalHandleChange.call(this, e);
};
```

這個緊急方案會使用瀏覽器原生的 alert 來顯示警示訊息。

---

## ✅ **修復確認**

警示功能正常時，您應該看到：
1. 📊 控制台顯示詳細檔案資訊
2. 🚨 8秒的紅色錯誤警示
3. 💡 1秒後的藍色壓縮建議
4. 🔄 檔案選擇被自動清空
5. 🚫 沒有圖片預覽出現

如果以上都正常，表示警示功能已成功修復！
